####################
# bash session env #
####################

#0x01 - SYSTEM VARS
#0x02 - PROMPT AND SHELL
#0x03 - LESS
#0x04 - CODE AND $PATH



#############################################################################################################
#0x01 - SYSTEM
#############################################################################################################
export EDITOR="vim"
export VISUAL="vim"
export PAGER="less"

export LANGUAGE="en_US:en"

export DOTFILES=/home/sjas/etc/.ansible

if ! shopt -oq posix; then
	if [ -f /usr/share/bash-completion/bash_completion ]; then . /usr/share/bash-completion/bash_completion
	elif [ -f /etc/bash_completion ]; then . /etc/bash_completion; fi
fi




#############################################################################################################
#0x02 - PROMPT AND SHELL
#############################################################################################################
# old
#export PS1='$( i=$?; if [ $i -eq 0 ]; then echo \\\[\e[32\;1m\\\]$i; else echo \\\[\e[31\;1m\\\]$i; fi )\[\e[0m\] \u@\h \[\e[33;1m\]\t\[\e[0m\] \w$(if git status 2>/dev/null | grep -q "nothing to commit"; then echo \\\[\e[32m\\\]; else if git status 2>/dev/null | grep -qi -e "^Changes not staged for commit" -e "^Untracked files:"; then echo \\\[\e[31m\\\]; else if git status 2>/dev/null | grep -q "to be committed"; then echo \\\[\e[36m\\\]; else echo \\\[\e[35\;1m\\\]; fi; fi; fi)$(__git_ps1)\[\e[0m\] \[\e[37;1m\]\$\[\e[m\]\[\e[36;1m\]$SHLVL \n\[\e[m\]'
# now with history and command number
export PS1='$( i=$?; if [ $i -eq 0 ]; then echo \\\[\e[32\;1m\\\]$i; else echo \\\[\e[31\;1m\\\]$i; fi )\[\e[0m\] \u@\h \[\e[33;1m\]\t\[\e[0m\] \w$(if git status 2>/dev/null | grep -q "nothing to commit"; then echo \\\[\e[32m\\\]; else if git status 2>/dev/null | grep -qi -e "^Changes not staged for commit" -e "^Untracked files:"; then echo \\\[\e[31m\\\]; else if git status 2>/dev/null | grep -q "to be committed"; then echo \\\[\e[36m\\\]; else echo \\\[\e[35\;1m\\\]; fi; fi; fi)$(__git_ps1)\[\e[0m\] \[\e[37;1m\]\$\[\e[m\]\[\e[36;1m\]$SHLVL \[\e[m\]\[\e[37;1m\]h\[\e[m\]\[\e[36;1m\]\! \[\e[m\]\[\e[37;1m\]c\[\e[m\]\[\e[36;1m\]\# \n\[\e[m\]'

HISTSIZE="30000"

export PROMPT_COMMAND=echo
# $SHELLOPTS / $BASHOPTS
#set -x
shopt -s checkwinsize
shopt -s dotglob




#############################################################################################################
#0x03 - LESS
#############################################################################################################
#colored manpages
export LESS_TERMCAP_mb=$'\E[1;31m'	# begin blinking
export LESS_TERMCAP_md=$'\E[1;32m'	# begin bold				== GREEN  = command and flag color
export LESS_TERMCAP_us=$'\E[1;33m'	# begin underline 			== YELLOW = parameter color
export LESS_TERMCAP_me=$'\E[0m'		# end mode
export LESS_TERMCAP_se=$'\E[0m'		# end standout-mode
export LESS_TERMCAP_so=$'\E[38m'	# begin standout-mode - info box
export LESS_TERMCAP_ue=$'\E[0m'		# end underline

#couple global(1) with less(1)
export LESSGLOBALTAGS=global

#syntax highlighting, needs `libsource-highlight-common` package
#find path via `dpkg -L libsource-highlight-common | grep lesspipe`
export LESSOPEN="| /usr/share/source-highlight/src-hilite-lesspipe.sh %s"
export LESS=' -R '




#############################################################################################################
#0x04 - CODE AND $PATH
#############################################################################################################
# HELPER, can be called from CLI, too
addtopath() {
	if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]
	then
		PATH="$1${PATH:+":$PATH:"}"
	fi
	PATH=$(echo $PATH | sed -e 's/^:*//g' -e 's/:*$//g')
}

# DATA
#export NVM_DIR="$HOME/.nvm"
export GOROOT=/usr/local/go
#export GOPATH=$HOME/wrk/gocode  ## use default of $HOME/go for now
export GOPATH=/home/sjas/go 
export NVM_DIR="/home/sjas/.nvm"

for i in \
	/usr/local/bin \
	/usr/local/sbin \
	$GOROOT/bin \
	$GOPATH/bin 
do
	addtopath $i
done

export PATH
